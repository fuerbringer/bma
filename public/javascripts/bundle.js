var bma=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports={randomIntFromInterval:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},findStartAndFinish:function(t){for(var e={start:{x:!1,y:!1},finish:{x:!1,y:!1}},n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)"s"===t[n][r]?(e.start.x=r,e.start.y=n):"f"===t[n][r]&&(e.finish.x=r,e.finish.y=n);return e},sanitizeMatrix:function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)0!=t[e][n]&&1!=t[e][n]&&(t[e][n]=0);return t},setStatus:function(t){t.hasOwnProperty("startAndFinish")&&(document.getElementById("stat-start").innerHTML="`S("+t.startAndFinish.start.x+", "+t.startAndFinish.start.y+")`",document.getElementById("stat-end").innerHTML="`F("+t.startAndFinish.finish.x+", "+t.startAndFinish.finish.y+")`"),t.hasOwnProperty("distance")&&(document.getElementById("stat-distance").innerHTML="`"+t.distance+"` Zellen")}}},function(t,e,n){var r=n(0),i=n(2),o=n(3),a=n(4);document.createSvg=function(t){return this.createElementNS("http://www.w3.org/2000/svg",t)};t.exports={aStarDemo:function(){var t=o.generateRecBacktrackerMaze(24,24,!1);document.getElementById("container").appendChild(i.generateGridFromMatrix(t));for(var e=r.findStartAndFinish(t),n=[],s=(document.getElementById("debug-out"),new a.Grid(r.sanitizeMatrix(t))),l=new a.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0,heuristic:function(t,e){return a.Heuristic.chebyshev(t,e)}}).findPath(e.start.x,e.start.y,e.finish.x,e.finish.y,s),u=0;u<l.length;u++)n.push(i.getRealBoxCoords(l[u][0],l[u][1],{x:4,y:4}));i.drawVisualPath(n),r.setStatus({startAndFinish:e,distance:l.length-1})}}},function(t,e){t.exports={drawVisualPath:function(t,e,n,r){r=r||"main-grid",n=n||"green";for(var i=document.getElementById(r),o=document.createSvg("polyline"),a="",s=0;s<t.length;s++)t[s]instanceof Array&&2==t[s].length&&(a+=t[s].join(","),a+=" ");o.setAttribute("points",a),o.setAttribute("fill","none"),o.setAttribute("stroke",n),o.setAttribute("class","grid-path"),e&&o.setAttribute("id","grid-path"),i.appendChild(o)},clearVisualPaths:function(){for(var t=document.getElementsByClassName("grid-path");t[0];)t[0].parentNode.removeChild(t[0])},getSvgBoxCoord:function(t){var e=document.getElementById(t).parentNode.getAttribute("transform"),n=/translate\(\s*([^\s,)]+)[ , ]([^\s,)]+)/.exec(e);return[n[1],n[2]]},getRealBoxCoords:function(t,e,n){var r="coord-"+t+"-"+e,i=(n=n||{x:0,y:0},document.getElementById(r).parentNode.getAttribute("transform")),o=/translate\(\s*([^\s,)]+)[ , ]([^\s,)]+)/.exec(i);return[parseInt(o[1])+n.x,parseInt(o[2])+n.y]},setRectAttribute:function(t,e,n,r){document.getElementById("coord-"+t+"-"+e).setAttribute(n,r)},resetAllCoordRects:function(){for(var t=document.getElementsByClassName("coord-rect"),e=0;e<t.length;e++)t[e].setAttribute("fill","white"),t[e].setAttribute("stroke","black"),t[e].setAttribute("stroke-width","0.1")},resetCoordRect:function(t,e){var n=document.getElementById("coord-"+t+"-"+e);n.setAttribute("fill","white"),n.setAttribute("stroke","black"),n.setAttribute("stroke-width","0.1")},generateGridFromMatrix:function(t,e,n,r){e=e||10,n=n||400,r=r||"main-grid";var i=document.createSvg("svg");i.setAttribute("id",r),i.setAttribute("width",n),i.setAttribute("height",n),i.setAttribute("viewBox",[0,0,t.length*e,t[0].length*e].join(" "));for(var o=0;o<t.length;o++)for(var a=0;a<t[o].length;a++){var s=document.createSvg("g");s.setAttribute("transform",["translate(",a*e,",",o*e,")"].join("")),t.length;var l=document.createSvg("rect");l.setAttribute("width",e),l.setAttribute("height",e),1==t[o][a]?l.setAttribute("fill","grey"):"s"==t[o][a]?l.setAttribute("fill","blue"):"f"==t[o][a]?l.setAttribute("fill","green"):l.setAttribute("fill","white"),l.setAttribute("id","coord-"+a+"-"+o),l.setAttribute("class","coord-rect"),l.setAttribute("stroke","black"),l.setAttribute("stroke-width","0.1"),s.appendChild(l),i.appendChild(s)}return i}}},function(t,e,n){var r=n(0);t.exports={generatePseudoRandomMaze:function(t,e,n){var r=[];n=n||4;for(var i=0;i<e;i++){for(var o=[],a=0;a<t;a++){var s=1==(100*Math.random()%n).toFixed(0)?1:0;o.push(s)}r.push(o)}var l=Math.floor(Math.random()*t),u=Math.floor(Math.random()*e),h=Math.floor(Math.random()*t),c=Math.floor(Math.random()*e);return r[u][l]="s",r[c][h]="f",r},markStartAndFinish:function(t,e){for(var n=[],r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)0==t[r][i]&&n.push({x:i,y:r});var o=Math.floor(Math.random()*n.length);e?t[n[o].y][n[o].x]="s":t[n[0].y][n[0].x]="s",n.splice(o,1);var a=Math.floor(Math.random()*n.length);return e?t[n[a].y][n[a].x]="f":t[n[n.length-1].y][n[n.length-1].x]="f",t},generateRecBacktrackerMaze:function(t,e,n){t+=2,e+=2;for(var i=[],o=0;o<e-1;o++){for(var a=0;a<t-1;a++);i.push([])}var s={width:t-1,height:e-1,tiles:new Array((t-1)*(e-1)).fill("wall")};function l(t){for(var{width:e,height:n}=t,r=new Array(e*n),i=0;i<n;i++)for(var o=0;o<e;o++){var a={x:o,y:i};r[u(t,a)]=a}return r}function u(t,e){return e.y*t.width+e.x}!function(t,e){for(var[n,r]of t)for(var i of(e.tiles[u(e,n)]="floor",r)){var o={x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2};e.tiles[u(e,o)]="floor"}}(function(t,e,n){var r=[o=n(t)],i=new Map;for(var o of t)i.set(o,[]);for(;o;){var a=t.filter(t=>!i.get(t).length&&e(o,t));if(a.length){var s=n(a);i.get(o).push(s),i.get(s).push(o),r.unshift(s),o=s}else r.shift(),o=r[0]}return i}(l(s).filter(t=>t.x%2&&t.y%2),function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)===2},function(t){return t[Math.floor(Math.random()*t.length)]}),s);a=0,o=0;for(var h of l(s)){var c=s.tiles[u(s,h)];!h.x&&h.y?(o++,a=0):a++,a<t-1&&o<e&&(i[o][a]="wall"==c?1:0)}var f=[];for(o=1;o<e-1;o++)for(a=1;a<t-1;a++)0==i[o][a]&&f.push({x:a,y:o});var p=r.randomIntFromInterval(0,f.length-1),d=f[p];f.splice(p,1);var g=f[r.randomIntFromInterval(0,f.length-1)];return i[d.y][d.x]="s",i[g.y][g.x]="f",i[0][0]=1,i}}},function(t,e,n){var r;t.exports=function t(e,n,i){function o(s,l){if(!n[s]){if(!e[s]){var u="function"==typeof r&&r;if(!l&&u)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return o(n||t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){e.exports=t("./lib/heap")},{"./lib/heap":2}],2:[function(t,e,n){(function(){var t,n,r,i,o,a,s,l,u,h,c,f,p,d,g;r=Math.floor,h=Math.min,n=function(t,e){return t<e?-1:t>e?1:0},u=function(t,e,i,o,a){var s;if(null==i&&(i=0),null==a&&(a=n),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);i<o;)s=r((i+o)/2),a(e,t[s])<0?o=s:i=s+1;return[].splice.apply(t,[i,i-i].concat(e)),e},a=function(t,e,r){return null==r&&(r=n),t.push(e),d(t,0,t.length-1,r)},o=function(t,e){var r,i;return null==e&&(e=n),r=t.pop(),t.length?(i=t[0],t[0]=r,g(t,0,e)):i=r,i},l=function(t,e,r){var i;return null==r&&(r=n),i=t[0],t[0]=e,g(t,0,r),i},s=function(t,e,r){var i;return null==r&&(r=n),t.length&&r(t[0],e)<0&&(i=[t[0],e],e=i[0],t[0]=i[1],g(t,0,r)),e},i=function(t,e){var i,o,a,s,l,u;for(null==e&&(e=n),s=function(){u=[];for(var e=0,n=r(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)u.push(e);return u}.apply(this).reverse(),l=[],o=0,a=s.length;o<a;o++)i=s[o],l.push(g(t,i,e));return l},p=function(t,e,r){var i;if(null==r&&(r=n),-1!==(i=t.indexOf(e)))return d(t,0,i,r),g(t,i,r)},c=function(t,e,r){var o,a,l,u,h;if(null==r&&(r=n),!(a=t.slice(0,e)).length)return a;for(i(a,r),h=t.slice(e),l=0,u=h.length;l<u;l++)o=h[l],s(a,o,r);return a.sort(r).reverse()},f=function(t,e,r){var a,s,l,c,f,p,d,g,v;if(null==r&&(r=n),10*e<=t.length){if(!(l=t.slice(0,e).sort(r)).length)return l;for(s=l[l.length-1],d=t.slice(e),c=0,p=d.length;c<p;c++)a=d[c],r(a,s)<0&&(u(l,a,0,null,r),l.pop(),s=l[l.length-1]);return l}for(i(t,r),v=[],f=0,g=h(e,t.length);0<=g?f<g:f>g;0<=g?++f:--f)v.push(o(t,r));return v},d=function(t,e,r,i){var o,a,s;for(null==i&&(i=n),o=t[r];r>e&&(a=t[s=r-1>>1],i(o,a)<0);)t[r]=a,r=s;return t[r]=o},g=function(t,e,r){var i,o,a,s,l;for(null==r&&(r=n),o=t.length,l=e,a=t[e],i=2*e+1;i<o;)(s=i+1)<o&&!(r(t[i],t[s])<0)&&(i=s),t[e]=t[i],i=2*(e=i)+1;return t[e]=a,d(t,l,e,r)},t=function(){function t(t){this.cmp=null!=t?t:n,this.nodes=[]}return t.push=a,t.pop=o,t.replace=l,t.pushpop=s,t.heapify=i,t.updateItem=p,t.nlargest=c,t.nsmallest=f,t.prototype.push=function(t){return a(this.nodes,t,this.cmp)},t.prototype.pop=function(){return o(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return s(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return i(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return p(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(void 0!==e&&null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(this)},{}],3:[function(t,e,n){e.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},{}],4:[function(t,e,n){var r=t("./Node"),i=t("./DiagonalMovement");function o(t,e,n){var r;"object"!=typeof t?r=t:(e=t.length,r=t[0].length,n=t),this.width=r,this.height=e,this.nodes=this._buildNodes(r,e,n)}o.prototype._buildNodes=function(t,e,n){var i,o,a=new Array(e);for(i=0;i<e;++i)for(a[i]=new Array(t),o=0;o<t;++o)a[i][o]=new r(o,i);if(void 0===n)return a;if(n.length!==e||n[0].length!==t)throw new Error("Matrix size does not fit");for(i=0;i<e;++i)for(o=0;o<t;++o)n[i][o]&&(a[i][o].walkable=!1);return a},o.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},o.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},o.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},o.prototype.setWalkableAt=function(t,e,n){this.nodes[e][t].walkable=n},o.prototype.getNeighbors=function(t,e){var n=t.x,r=t.y,o=[],a=!1,s=!1,l=!1,u=!1,h=!1,c=!1,f=!1,p=!1,d=this.nodes;if(this.isWalkableAt(n,r-1)&&(o.push(d[r-1][n]),a=!0),this.isWalkableAt(n+1,r)&&(o.push(d[r][n+1]),l=!0),this.isWalkableAt(n,r+1)&&(o.push(d[r+1][n]),h=!0),this.isWalkableAt(n-1,r)&&(o.push(d[r][n-1]),f=!0),e===i.Never)return o;if(e===i.OnlyWhenNoObstacles)s=f&&a,u=a&&l,c=l&&h,p=h&&f;else if(e===i.IfAtMostOneObstacle)s=f||a,u=a||l,c=l||h,p=h||f;else{if(e!==i.Always)throw new Error("Incorrect value of diagonalMovement");s=!0,u=!0,c=!0,p=!0}return s&&this.isWalkableAt(n-1,r-1)&&o.push(d[r-1][n-1]),u&&this.isWalkableAt(n+1,r-1)&&o.push(d[r-1][n+1]),c&&this.isWalkableAt(n+1,r+1)&&o.push(d[r+1][n+1]),p&&this.isWalkableAt(n-1,r+1)&&o.push(d[r+1][n-1]),o},o.prototype.clone=function(){var t,e,n=this.width,i=this.height,a=this.nodes,s=new o(n,i),l=new Array(i);for(t=0;t<i;++t)for(l[t]=new Array(n),e=0;e<n;++e)l[t][e]=new r(e,t,a[t][e].walkable);return s.nodes=l,s},e.exports=o},{"./DiagonalMovement":3,"./Node":6}],5:[function(t,e,n){e.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var n=Math.SQRT2-1;return t<e?n*t+e:n*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},{}],6:[function(t,e,n){e.exports=function(t,e,n){this.x=t,this.y=e,this.walkable=void 0===n||n}},{}],7:[function(t,e,n){function r(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function i(t,e,n,r){var i,o,a,s,l,u,h=Math.abs,c=[];for(a=h(n-t),s=h(r-e),i=t<n?1:-1,o=e<r?1:-1,l=a-s;c.push([t,e]),t!==n||e!==r;)(u=2*l)>-s&&(l-=s,t+=i),u<a&&(l+=a,e+=o);return c}n.backtrace=r,n.biBacktrace=function(t,e){var n=r(t),i=r(e);return n.concat(i.reverse())},n.pathLength=function(t){var e,n,r,i,o,a=0;for(e=1;e<t.length;++e)n=t[e-1],r=t[e],i=n[0]-r[0],o=n[1]-r[1],a+=Math.sqrt(i*i+o*o);return a},n.interpolate=i,n.expandPath=function(t){var e,n,r,o,a,s,l=[],u=t.length;if(u<2)return l;for(a=0;a<u-1;++a)for(e=t[a],n=t[a+1],r=i(e[0],e[1],n[0],n[1]),o=r.length,s=0;s<o-1;++s)l.push(r[s]);return l.push(t[u-1]),l},n.smoothenPath=function(t,e){var n,r,o,a,s,l,u,h,c,f,p,d=e.length,g=e[0][0],v=e[0][1],b=e[d-1][0],m=e[d-1][1];for(s=[[n=g,r=v]],l=2;l<d;++l){for(h=e[l],o=h[0],a=h[1],c=i(n,r,o,a),p=!1,u=1;u<c.length;++u)if(f=c[u],!t.isWalkableAt(f[0],f[1])){p=!0;break}p&&(lastValidCoord=e[l-1],s.push(lastValidCoord),n=lastValidCoord[0],r=lastValidCoord[1])}return s.push([b,m]),s},n.compressPath=function(t){if(t.length<3)return t;var e,n,r,i,o,a,s=[],l=t[0][0],u=t[0][1],h=t[1][0],c=t[1][1],f=h-l,p=c-u;for(o=Math.sqrt(f*f+p*p),f/=o,p/=o,s.push([l,u]),a=2;a<t.length;a++)e=h,n=c,r=f,i=p,h=t[a][0],c=t[a][1],f=h-e,p=c-n,o=Math.sqrt(f*f+p*p),p/=o,(f/=o)===r&&p===i||s.push([e,n]);return s.push([h,c]),s}},{}],8:[function(t,e,n){e.exports={Heap:t("heap"),Node:t("./core/Node"),Grid:t("./core/Grid"),Util:t("./core/Util"),DiagonalMovement:t("./core/DiagonalMovement"),Heuristic:t("./core/Heuristic"),AStarFinder:t("./finders/AStarFinder"),BestFirstFinder:t("./finders/BestFirstFinder"),BreadthFirstFinder:t("./finders/BreadthFirstFinder"),DijkstraFinder:t("./finders/DijkstraFinder"),BiAStarFinder:t("./finders/BiAStarFinder"),BiBestFirstFinder:t("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:t("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:t("./finders/BiDijkstraFinder"),IDAStarFinder:t("./finders/IDAStarFinder"),JumpPointFinder:t("./finders/JumpPointFinder")}},{"./core/DiagonalMovement":3,"./core/Grid":4,"./core/Heuristic":5,"./core/Node":6,"./core/Util":7,"./finders/AStarFinder":9,"./finders/BestFirstFinder":10,"./finders/BiAStarFinder":11,"./finders/BiBestFirstFinder":12,"./finders/BiBreadthFirstFinder":13,"./finders/BiDijkstraFinder":14,"./finders/BreadthFirstFinder":15,"./finders/DijkstraFinder":16,"./finders/IDAStarFinder":17,"./finders/JumpPointFinder":22,heap:1}],9:[function(t,e,n){var r=t("heap"),i=t("../core/Util"),o=t("../core/Heuristic"),a=t("../core/DiagonalMovement");function s(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||o.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||o.manhattan:this.heuristic=t.heuristic||o.octile}s.prototype.findPath=function(t,e,n,o,a){var s,l,u,h,c,f,p,d,g=new r(function(t,e){return t.f-e.f}),v=a.getNodeAt(t,e),b=a.getNodeAt(n,o),m=this.heuristic,A=this.diagonalMovement,y=this.weight,M=Math.abs,k=Math.SQRT2;for(v.g=0,v.f=0,g.push(v),v.opened=!0;!g.empty();){if((s=g.pop()).closed=!0,s===b)return i.backtrace(b);for(l=a.getNeighbors(s,A),h=0,c=l.length;h<c;++h)(u=l[h]).closed||(f=u.x,p=u.y,d=s.g+(f-s.x==0||p-s.y==0?1:k),(!u.opened||d<u.g)&&(u.g=d,u.h=u.h||y*m(M(f-n),M(p-o)),u.f=u.g+u.h,u.parent=s,u.opened?g.updateItem(u):(g.push(u),u.opened=!0)))}return[]},e.exports=s},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],10:[function(t,e,n){var r=t("./AStarFinder");function i(t){r.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},{"./AStarFinder":9}],11:[function(t,e,n){var r=t("heap"),i=t("../core/Util"),o=t("../core/Heuristic"),a=t("../core/DiagonalMovement");function s(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||o.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=t.heuristic||o.manhattan:this.heuristic=t.heuristic||o.octile}s.prototype.findPath=function(t,e,n,o,a){var s,l,u,h,c,f,p,d,g=function(t,e){return t.f-e.f},v=new r(g),b=new r(g),m=a.getNodeAt(t,e),A=a.getNodeAt(n,o),y=this.heuristic,M=this.diagonalMovement,k=this.weight,x=Math.abs,W=Math.SQRT2;for(m.g=0,m.f=0,v.push(m),m.opened=1,A.g=0,A.f=0,b.push(A),A.opened=2;!v.empty()&&!b.empty();){for((s=v.pop()).closed=!0,l=a.getNeighbors(s,M),h=0,c=l.length;h<c;++h)if(!(u=l[h]).closed){if(2===u.opened)return i.biBacktrace(s,u);f=u.x,p=u.y,d=s.g+(f-s.x==0||p-s.y==0?1:W),(!u.opened||d<u.g)&&(u.g=d,u.h=u.h||k*y(x(f-n),x(p-o)),u.f=u.g+u.h,u.parent=s,u.opened?v.updateItem(u):(v.push(u),u.opened=1))}for((s=b.pop()).closed=!0,l=a.getNeighbors(s,M),h=0,c=l.length;h<c;++h)if(!(u=l[h]).closed){if(1===u.opened)return i.biBacktrace(u,s);f=u.x,p=u.y,d=s.g+(f-s.x==0||p-s.y==0?1:W),(!u.opened||d<u.g)&&(u.g=d,u.h=u.h||k*y(x(f-t),x(p-e)),u.f=u.g+u.h,u.parent=s,u.opened?b.updateItem(u):(b.push(u),u.opened=2))}}return[]},e.exports=s},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],12:[function(t,e,n){var r=t("./BiAStarFinder");function i(t){r.call(this,t);var e=this.heuristic;this.heuristic=function(t,n){return 1e6*e(t,n)}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},{"./BiAStarFinder":11}],13:[function(t,e,n){var r=t("../core/Util"),i=t("../core/DiagonalMovement");function o(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=i.OnlyWhenNoObstacles:this.diagonalMovement=i.IfAtMostOneObstacle:this.diagonalMovement=i.Never)}o.prototype.findPath=function(t,e,n,i,o){var a,s,l,u,h,c=o.getNodeAt(t,e),f=o.getNodeAt(n,i),p=[],d=[],g=this.diagonalMovement;for(p.push(c),c.opened=!0,c.by=0,d.push(f),f.opened=!0,f.by=1;p.length&&d.length;){for((l=p.shift()).closed=!0,a=o.getNeighbors(l,g),u=0,h=a.length;u<h;++u)if(!(s=a[u]).closed)if(s.opened){if(1===s.by)return r.biBacktrace(l,s)}else p.push(s),s.parent=l,s.opened=!0,s.by=0;for((l=d.shift()).closed=!0,a=o.getNeighbors(l,g),u=0,h=a.length;u<h;++u)if(!(s=a[u]).closed)if(s.opened){if(0===s.by)return r.biBacktrace(s,l)}else d.push(s),s.parent=l,s.opened=!0,s.by=1}return[]},e.exports=o},{"../core/DiagonalMovement":3,"../core/Util":7}],14:[function(t,e,n){var r=t("./BiAStarFinder");function i(t){r.call(this,t),this.heuristic=function(t,e){return 0}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},{"./BiAStarFinder":11}],15:[function(t,e,n){var r=t("../core/Util"),i=t("../core/DiagonalMovement");function o(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=i.OnlyWhenNoObstacles:this.diagonalMovement=i.IfAtMostOneObstacle:this.diagonalMovement=i.Never)}o.prototype.findPath=function(t,e,n,i,o){var a,s,l,u,h,c=[],f=this.diagonalMovement,p=o.getNodeAt(t,e),d=o.getNodeAt(n,i);for(c.push(p),p.opened=!0;c.length;){if((l=c.shift()).closed=!0,l===d)return r.backtrace(d);for(a=o.getNeighbors(l,f),u=0,h=a.length;u<h;++u)(s=a[u]).closed||s.opened||(c.push(s),s.opened=!0,s.parent=l)}return[]},e.exports=o},{"../core/DiagonalMovement":3,"../core/Util":7}],16:[function(t,e,n){var r=t("./AStarFinder");function i(t){r.call(this,t),this.heuristic=function(t,e){return 0}}i.prototype=new r,i.prototype.constructor=i,e.exports=i},{"./AStarFinder":9}],17:[function(t,e,n){t("../core/Util");var r=t("../core/Heuristic"),i=t("../core/Node"),o=t("../core/DiagonalMovement");function a(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||r.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never),this.diagonalMovement===o.Never?this.heuristic=t.heuristic||r.manhattan:this.heuristic=t.heuristic||r.octile}a.prototype.findPath=function(t,e,n,r,o){var a,s,l,u=(new Date).getTime(),h=function(t,e){return this.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}.bind(this),c=function(t,e){return t.x===e.x||t.y===e.y?1:Math.SQRT2},f=function(t,e,n,r,a){if(this.timeLimit>0&&(new Date).getTime()-u>1e3*this.timeLimit)return 1/0;var s,l,p,g,v=e+h(t,d)*this.weight;if(v>n)return v;if(t==d)return r[a]=[t.x,t.y],t;var b=o.getNeighbors(t,this.diagonalMovement);for(p=0,s=1/0;g=b[p];++p){if(this.trackRecursion&&(g.retainCount=g.retainCount+1||1,!0!==g.tested&&(g.tested=!0)),(l=f(g,e+c(t,g),n,r,a+1))instanceof i)return r[a]=[t.x,t.y],l;this.trackRecursion&&0==--g.retainCount&&(g.tested=!1),l<s&&(s=l)}return s}.bind(this),p=o.getNodeAt(t,e),d=o.getNodeAt(n,r),g=h(p,d);for(a=0;;++a){if((l=f(p,0,g,s=[],0))===1/0)return[];if(l instanceof i)return s;g=l}return[]},e.exports=a},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Node":6,"../core/Util":7}],18:[function(t,e,n){var r=t("./JumpPointFinderBase"),i=t("../core/DiagonalMovement");function o(t){r.call(this,t)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return this._jump(t+o,e+a,t,e)},o.prototype._findNeighbors=function(t){var e,n,r,o,a,s,l,u,h=t.parent,c=t.x,f=t.y,p=this.grid,d=[];if(h)e=h.x,n=h.y,r=(c-e)/Math.max(Math.abs(c-e),1),o=(f-n)/Math.max(Math.abs(f-n),1),0!==r&&0!==o?(p.isWalkableAt(c,f+o)&&d.push([c,f+o]),p.isWalkableAt(c+r,f)&&d.push([c+r,f]),p.isWalkableAt(c+r,f+o)&&d.push([c+r,f+o]),p.isWalkableAt(c-r,f)||d.push([c-r,f+o]),p.isWalkableAt(c,f-o)||d.push([c+r,f-o])):0===r?(p.isWalkableAt(c,f+o)&&d.push([c,f+o]),p.isWalkableAt(c+1,f)||d.push([c+1,f+o]),p.isWalkableAt(c-1,f)||d.push([c-1,f+o])):(p.isWalkableAt(c+r,f)&&d.push([c+r,f]),p.isWalkableAt(c,f+1)||d.push([c+r,f+1]),p.isWalkableAt(c,f-1)||d.push([c+r,f-1]));else for(a=p.getNeighbors(t,i.Always),l=0,u=a.length;l<u;++l)s=a[l],d.push([s.x,s.y]);return d},e.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],19:[function(t,e,n){var r=t("./JumpPointFinderBase"),i=t("../core/DiagonalMovement");function o(t){r.call(this,t)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(i.isWalkableAt(t-o,e+a)&&!i.isWalkableAt(t-o,e)||i.isWalkableAt(t+o,e-a)&&!i.isWalkableAt(t,e-a))return[t,e];if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t+o,e+1)&&!i.isWalkableAt(t,e+1)||i.isWalkableAt(t+o,e-1)&&!i.isWalkableAt(t,e-1))return[t,e]}else if(i.isWalkableAt(t+1,e+a)&&!i.isWalkableAt(t+1,e)||i.isWalkableAt(t-1,e+a)&&!i.isWalkableAt(t-1,e))return[t,e];return i.isWalkableAt(t+o,e)||i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},o.prototype._findNeighbors=function(t){var e,n,r,o,a,s,l,u,h=t.parent,c=t.x,f=t.y,p=this.grid,d=[];if(h)e=h.x,n=h.y,r=(c-e)/Math.max(Math.abs(c-e),1),o=(f-n)/Math.max(Math.abs(f-n),1),0!==r&&0!==o?(p.isWalkableAt(c,f+o)&&d.push([c,f+o]),p.isWalkableAt(c+r,f)&&d.push([c+r,f]),(p.isWalkableAt(c,f+o)||p.isWalkableAt(c+r,f))&&d.push([c+r,f+o]),!p.isWalkableAt(c-r,f)&&p.isWalkableAt(c,f+o)&&d.push([c-r,f+o]),!p.isWalkableAt(c,f-o)&&p.isWalkableAt(c+r,f)&&d.push([c+r,f-o])):0===r?p.isWalkableAt(c,f+o)&&(d.push([c,f+o]),p.isWalkableAt(c+1,f)||d.push([c+1,f+o]),p.isWalkableAt(c-1,f)||d.push([c-1,f+o])):p.isWalkableAt(c+r,f)&&(d.push([c+r,f]),p.isWalkableAt(c,f+1)||d.push([c+r,f+1]),p.isWalkableAt(c,f-1)||d.push([c+r,f-1]));else for(a=p.getNeighbors(t,i.IfAtMostOneObstacle),l=0,u=a.length;l<u;++l)s=a[l],d.push([s.x,s.y]);return d},e.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],20:[function(t,e,n){var r=t("./JumpPointFinderBase"),i=t("../core/DiagonalMovement");function o(t){r.call(this,t)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o&&0!==a){if(this._jump(t+o,e,t,e)||this._jump(t,e+a,t,e))return[t,e]}else if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else if(0!==a&&(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a)))return[t,e];return i.isWalkableAt(t+o,e)&&i.isWalkableAt(t,e+a)?this._jump(t+o,e+a,t,e):null},o.prototype._findNeighbors=function(t){var e,n,r,o,a,s,l,u,h,c=t.parent,f=t.x,p=t.y,d=this.grid,g=[];if(c){if(e=c.x,n=c.y,r=(f-e)/Math.max(Math.abs(f-e),1),o=(p-n)/Math.max(Math.abs(p-n),1),0!==r&&0!==o)d.isWalkableAt(f,p+o)&&g.push([f,p+o]),d.isWalkableAt(f+r,p)&&g.push([f+r,p]),d.isWalkableAt(f,p+o)&&d.isWalkableAt(f+r,p)&&g.push([f+r,p+o]);else if(0!==r){h=d.isWalkableAt(f+r,p);var v=d.isWalkableAt(f,p+1),b=d.isWalkableAt(f,p-1);h&&(g.push([f+r,p]),v&&g.push([f+r,p+1]),b&&g.push([f+r,p-1])),v&&g.push([f,p+1]),b&&g.push([f,p-1])}else if(0!==o){h=d.isWalkableAt(f,p+o);var m=d.isWalkableAt(f+1,p),A=d.isWalkableAt(f-1,p);h&&(g.push([f,p+o]),m&&g.push([f+1,p+o]),A&&g.push([f-1,p+o])),m&&g.push([f+1,p]),A&&g.push([f-1,p])}}else for(a=d.getNeighbors(t,i.OnlyWhenNoObstacles),l=0,u=a.length;l<u;++l)s=a[l],g.push([s.x,s.y]);return g},e.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],21:[function(t,e,n){var r=t("./JumpPointFinderBase"),i=t("../core/DiagonalMovement");function o(t){r.call(this,t)}o.prototype=new r,o.prototype.constructor=o,o.prototype._jump=function(t,e,n,r){var i=this.grid,o=t-n,a=e-r;if(!i.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(i.getNodeAt(t,e).tested=!0),i.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==o){if(i.isWalkableAt(t,e-1)&&!i.isWalkableAt(t-o,e-1)||i.isWalkableAt(t,e+1)&&!i.isWalkableAt(t-o,e+1))return[t,e]}else{if(0===a)throw new Error("Only horizontal and vertical movements are allowed");if(i.isWalkableAt(t-1,e)&&!i.isWalkableAt(t-1,e-a)||i.isWalkableAt(t+1,e)&&!i.isWalkableAt(t+1,e-a))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+o,e+a,t,e)},o.prototype._findNeighbors=function(t){var e,n,r,o,a,s,l,u,h=t.parent,c=t.x,f=t.y,p=this.grid,d=[];if(h)e=h.x,n=h.y,r=(c-e)/Math.max(Math.abs(c-e),1),o=(f-n)/Math.max(Math.abs(f-n),1),0!==r?(p.isWalkableAt(c,f-1)&&d.push([c,f-1]),p.isWalkableAt(c,f+1)&&d.push([c,f+1]),p.isWalkableAt(c+r,f)&&d.push([c+r,f])):0!==o&&(p.isWalkableAt(c-1,f)&&d.push([c-1,f]),p.isWalkableAt(c+1,f)&&d.push([c+1,f]),p.isWalkableAt(c,f+o)&&d.push([c,f+o]));else for(a=p.getNeighbors(t,i.Never),l=0,u=a.length;l<u;++l)s=a[l],d.push([s.x,s.y]);return d},e.exports=o},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":23}],22:[function(t,e,n){var r=t("../core/DiagonalMovement"),i=t("./JPFNeverMoveDiagonally"),o=t("./JPFAlwaysMoveDiagonally"),a=t("./JPFMoveDiagonallyIfNoObstacles"),s=t("./JPFMoveDiagonallyIfAtMostOneObstacle");e.exports=function(t){return(t=t||{}).diagonalMovement===r.Never?new i(t):t.diagonalMovement===r.Always?new o(t):t.diagonalMovement===r.OnlyWhenNoObstacles?new a(t):new s(t)}},{"../core/DiagonalMovement":3,"./JPFAlwaysMoveDiagonally":18,"./JPFMoveDiagonallyIfAtMostOneObstacle":19,"./JPFMoveDiagonallyIfNoObstacles":20,"./JPFNeverMoveDiagonally":21}],23:[function(t,e,n){var r=t("heap"),i=t("../core/Util"),o=t("../core/Heuristic");function a(t){t=t||{},this.heuristic=t.heuristic||o.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}t("../core/DiagonalMovement"),a.prototype.findPath=function(t,e,n,o,a){var s,l=this.openList=new r(function(t,e){return t.f-e.f}),u=this.startNode=a.getNodeAt(t,e),h=this.endNode=a.getNodeAt(n,o);for(this.grid=a,u.g=0,u.f=0,l.push(u),u.opened=!0;!l.empty();){if((s=l.pop()).closed=!0,s===h)return i.expandPath(i.backtrace(h));this._identifySuccessors(s)}return[]},a.prototype._identifySuccessors=function(t){var e,n,r,i,a,s,l,u,h,c,f=this.grid,p=this.heuristic,d=this.openList,g=this.endNode.x,v=this.endNode.y,b=t.x,m=t.y,A=Math.abs;for(Math.max,e=this._findNeighbors(t),i=0,a=e.length;i<a;++i)if(n=e[i],r=this._jump(n[0],n[1],b,m)){if(s=r[0],l=r[1],(c=f.getNodeAt(s,l)).closed)continue;u=o.octile(A(s-b),A(l-m)),h=t.g+u,(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||p(A(s-g),A(l-v)),c.f=c.g+c.h,c.parent=t,c.opened?d.updateItem(c):(d.push(c),c.opened=!0))}},e.exports=a},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}]},{},[8])(8)}]);